<!DOCTYPE html>
<html>
<head>
  <title>Baltimore Investment Flows</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1">


  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" type="text/css" href="stylesheets/css/urban.css"/>
  <link rel="stylesheet" type="text/css" href="stylesheets/css/main.css"/>
  <link rel="stylesheet" type="text/css" href="stylesheets/css/urban-header.css"/>
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic,900" rel="stylesheet" type="text/css">

  <!-- Add in meta data -->

  <script type="application/ld+json">

  </script>


</head>
<body>

<!-- Google Tag Manager -->
<!-- <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MKBD2W"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MKBD2W');</script> -->
<!-- End Google Tag Manager -->

<!-- START HEADER -->
<div id="header-pinned" class="no-touch">
   <a target="_blank" href="http://www.urban.org" title="Home" rel="home" class="site-logo"></a>
	<div class="title"><span class="feature-link"><a href="http://www.urban.org/features" class="title-linkback" alt="Urban Institute logo">Features</a></div>
	<div class="share-icons">
	    <div class="shareThisP">
	        <span onclick="toggle_visibility('shareBox');">
	                <div class="shareThisB"></div>
	            </span>
	        <div class="shareThisW" id="shareBox">
	          <!-- Update this content!!!! -->
	          <!-- What is add this???? -->
	            <div class="addthis_toolbox addthis_default_style  " addthis:title="" addthis:url="">
	                
	                <a href="" target="_blank" class="addthis_button_facebook at300b" title="Facebook" onclick="toggle_visibility('shareBox');"><span class="at4-icon aticon-facebook" style="background-color: rgb(48, 88, 145);"><span class="at_a11y">Share on facebook</span></span></a>

	                <a href="" target="_blank" class="addthis_button_twitter at300b" title="Tweet" onclick="toggle_visibility('shareBox');"><span class="at4-icon aticon-twitter" style="background-color: rgb(44, 168, 210);"><span class="at_a11y">Share on twitter</span></span></a>

	                <a href="" target="_blank" class="addthis_button_email at300b" target="_blank" title="Email" onclick="toggle_visibility('shareBox');"><span class="at4-icon aticon-email" style="background-color: rgb(115, 138, 141);"><span class="at_a11y">Share on email</span></span></a> 
	            </div>

	        </div>
	    </div>
	</div>
</div>

<div class="main-container">
	<div class="banner-img">
		
	</div>
	<div id="lede">
		<h1>Baltimore Funding Flows Wireframes</h1>
		<div class="date">October 9, 2018</div>
		<div class="intro">
			<p><strong>Investment in Baltimore is uneven</strong>—ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum fermentum eu elit id pretium. Quisque sit amet quam quis arcu sagittis sollicitudin eget et neque. Duis sollicitudin, ipsum vitae mollis tempor, arcu ligula euismod ipsum, in tincidunt arcu eros vel est.</p>

			<p>Etiam dignissim arcu vel lacus mollis, in dapibus lectus interdum. Etiam at nibh ac dui gravida hendrerit. Donec consectetur nibh porta elementum dignissim. Quisque in fringilla massa. In hac habitasse platea dictumst. Aliquam elementum molestie sapien eu ultrices. Nulla at pulvinar quam. Etiam laoreet dignissim nunc, eget lacinia nunc finibus eget. Duis fringilla ullamcorper ex cursus volutpat.</p>

			<p>nteger pellentesque lorem id massa feugiat blandit. Integer congue sem et ipsum pretium, mollis volutpat mauris aliquam. Aenean ultricies vulputate tempor. Praesent lacus enim, scelerisque a porttitor quis, lobortis et mi. Fusce accumsan dapibus consectetur. Vivamus tristique eros sed ligula ultrices, at rutrum arcu sagittis.</p>
		</div>
	</div>
	<div id="story-container">
		<div id="story">
			<div class="div-section-divider"></div>
			<p class="trigger" data-step="0" style="height: 347px;">Step 1 in the graphic. It triggers in the middle of the viewport. For this graphic, it is the same as the initial state so the reader doesn’t miss anything.</p>
			<p class="trigger" data-step="1" style="height: 347px;">Step 2 arrives. The graphic should be locking into a fixed position right about now. We could have a whole bunch of these “fixed” steps.</p>
			<p class="trigger" data-step="2" style="height: 347px;">Step 3 concludes our brief tour. The graphic should now go back to its original in-flow position, elegantly snapping back into place.</p>
			<p class="trigger" data-step="0" style="height: 347px;">Step 1 in the graphic. It triggers in the middle of the viewport. For this graphic, it is the same as the initial state so the reader doesn’t miss anything.</p>
			<p class="trigger" data-step="1" style="height: 347px;">Step 2 arrives. The graphic should be locking into a fixed position right about now. We could have a whole bunch of these “fixed” steps.</p>
			<p class="trigger" data-step="2" style="height: 347px;">Step 3 concludes our brief tour. The graphic should now go back to its original in-flow position, elegantly snapping back into place.</p>
			<p class="trigger" data-step="0" style="height: 347px;">Step 1 in the graphic. It triggers in the middle of the viewport. For this graphic, it is the same as the initial state so the reader doesn’t miss anything.</p>
			<p class="trigger" data-step="1" style="height: 347px;">Step 2 arrives. The graphic should be locking into a fixed position right about now. We could have a whole bunch of these “fixed” steps.</p>
			<p class="trigger" data-step="2" style="height: 347px;">Step 3 concludes our brief tour. The graphic should now go back to its original in-flow position, elegantly snapping back into place.</p>						
			<p class="trigger" data-step="0" style="height: 347px;">Step 1 in the graphic. It triggers in the middle of the viewport. For this graphic, it is the same as the initial state so the reader doesn’t miss anything.</p>
			<p class="trigger" data-step="1" style="height: 347px;">Step 2 arrives. The graphic should be locking into a fixed position right about now. We could have a whole bunch of these “fixed” steps.</p>
			<p class="trigger" data-step="2" style="height: 347px;">Step 3 concludes our brief tour. The graphic should now go back to its original in-flow position, elegantly snapping back into place.</p>			
		</div>
		<div id="sticky-right" class="">
			<div class="sticky-right-inner">
				<div class="graphic">
				</div>	
			</div>			
		</div>
	</div>
</div>

<script src="js/lib/waypoints/noframework.waypoints.min.js"></script>
<script src="js/lib/pym.min.js"></script>
<script src="js/lib/jquery.min.js"></script>
<script type="text/javascript">
		(function() {

			// helper function so we can map over dom selection
			function selectionToArray(selection) {
				var len = selection.length
				var result = []
				for (var i = 0; i < len; i++) {
					result.push(selection[i])
				}
				return result
			}

			function waypoints() {
				// select elements
				var graphicEl = document.querySelector('#story-container')
				var graphicVisEl = graphicEl.querySelector('#sticky-right')
				var triggerEls = selectionToArray(graphicEl.querySelectorAll('.trigger'))

				// viewport height
				var viewportHeight = window.innerHeight
				var halfViewportHeight = Math.floor(viewportHeight / 2)

				// a global function creates and handles all the vis + updates
				// var graphic = createGraphic('.graphic')

				// handle the fixed/static position of grahpic
				var toggle = function(fixed, bottom) {
					if (fixed) graphicVisEl.classList.add('is-fixed')
					else graphicVisEl.classList.remove('is-fixed')

					if (bottom) graphicVisEl.classList.add('is-bottom')
					else graphicVisEl.classList.remove('is-bottom')
				}
				
				// setup a waypoint trigger for each trigger element
				var waypoints = triggerEls.map(function(el) {
					
					// get the step, cast as number					
					var step = +el.getAttribute('data-step')

					return new Waypoint({
						element: el, // our trigger element
						handler: function(direction) {
							// if the direction is down then we use that number,
							// else, we want to trigger the previous one
							var nextStep = direction === 'down' ? step : Math.max(0, step - 1)
							
							// tell our graphic to update with a specific step
							// graphic.update(nextStep)
							console.log(nextStep)
						},
						offset: '50%',  // trigger halfway up the viewport
					})
				})

				// enter (top) / exit (bottom) graphic (toggle fixed position)
				var enterWaypoint = new Waypoint({
					element: graphicEl,
					handler: function(direction) {
						var fixed = direction === 'down'
						var bottom = false
						toggle(fixed, bottom)
					},
				})

				var exitWaypoint = new Waypoint({
					element: graphicEl,
					handler: function(direction) {
						var fixed = direction === 'up'
						var bottom = !fixed
						toggle(fixed, bottom)
					},
					offset: 'bottom-in-view', // waypoints convenience instead of a calculation
				})
			}

			waypoints()

		})()
</script>
</body>
</html>
